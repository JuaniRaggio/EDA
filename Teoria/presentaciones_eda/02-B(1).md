# Estructura de Datos y Algoritmos

# ITBA     2025-Q2

# Test-Driven Development

<span style="color:#000000">TDD es una metodología que comienza por los tests y luego pasa a la implementación\.</span>

<span style="color:#000000">Permite enfocarse en la definición de la interfaz y del comportamiento y no en los detalles internos de implementación\.</span>

<span style="color:#000000">Ve al sistema que se va a desarrollar como una caja negra ya que todavía no existe\!</span>

<span style="color:#000000">Apunta a que todas las funcionalidades tengan algún test que las controle y defina\.</span>

# Unit Testing

<span style="color:#000000">Testear pequeñas unidades del código\.</span>

<span style="color:#000000">Normalmente una clase o de una función aisladas\.</span>

<span style="color:#000000">Corren automáticamente\.</span>

<span style="color:#000000">Pueden ser ejecutados cada vez que se hacen cambios para comprobar que la funcionalidad anterior siga funcionando correctamente\.</span>

<span style="color:#000000">Son esenciales para las metodologías Ágiles y para realizar Refactoring de código\.</span>

# Unit Test - Características

<span style="color:#000000">Automático</span>

<span style="color:#000000">Verifican un único caso por test</span>

<span style="color:#000000">Repetible</span>

<span style="color:#000000">Independientes de otros tests o de condiciones externas</span>

<span style="color:#000000">Mantenible y Documentado \( comentado \)</span>

<span style="color:#000000">Ejecuta en muy poco tiempo \( muy deseable \)</span>

# ¿Qué testear en un Unit Test?

<span style="color:#000000">En el caso de un método o función:</span>

<span style="color:#000000">Casos Típicos</span>

<span style="color:#000000">Casos de Borde</span>

<span style="color:#000000">Casos de Error</span>

<span style="color:#000000">Casos de Excepción</span>

<span style="color:#000000">En el caso de una clase:</span>

<span style="color:#000000">Secuencias de llamadas válidas</span>

<span style="color:#000000">S</span> ecuencias de llamadas inválidas

<span style="color:#000000">Chequeo de invariantes</span>

# JUnit 5

Introducción

![](img/02-B%281%29_0.png)

# JUnit

<span style="color:#000000">Es un framework para realizar casos de prueba en aplicaciones Java</span>

<span style="color:#000000">Se pueden comparar resultados de las invocaciones de métodos con los valores esperados\, o verificar si una excepción fue lanzada o no\.</span>

<span style="color:#000000">Un caso de prueba es abortado ni bien falla alguna verificación o se lanza una excepción no esperada</span>

_[https://junit\.org/junit5/](https://junit.org/junit5/)_

# Comparando resultados

<span style="color:#000000">El </span>  <span style="color:#000000"> __test unitario__ </span>  <span style="color:#000000"> más simple consiste en comparar el resultado obtenido con el resultado esperado\.</span>

<span style="color:#000000">Para ello\, se pueden utilizar los siguientes métodos estáticos:</span>

<span style="color:#000000">Assertions\.</span>  <span style="color:#000000"> _assertEquals_ </span>  <span style="color:#000000">\(valorEsperado\, valorObtenido\)</span>

<span style="color:#000000">Assertions\.</span>  <span style="color:#000000"> _assertTrue_ </span>  <span style="color:#000000">\(valorObtenido\)</span>

<span style="color:#000000">\.\.\.</span>

<span style="color:#000000">Si un método lanza una excepción\, el mismo se considera que falló\. Para aquellos casos en que se espera que se lance esta excepción\, se indica de la siguiente manera:</span>

<span style="color:#000000">Assertions\.assertThrows\(RuntimeException\.class\, \(\) \-> \.\.\.\);</span>

# Ejemplo

![](img/02-B%281%29_1.png)

![](img/02-B%281%29_2.png)

# Ambiente de prueba



* <span style="color:#000000">Frecuentemente se desea tener un ambiente de prueba prefijado\, por ejemplo con ciertas variables inicializadas\. </span>
* <span style="color:#000000">Para evitar repetir este código de inicialización en cada uno de los tests unitarios \(en cada uno de los métodos </span>  <span style="color:#000000">@Test</span>  <span style="color:#000000">\) se cuentan con varias anotaciones útiles:</span>
  * <span style="color:#808000">@BeforeAll</span>  <span style="color:#000000">: Se ejecutará antes de todos los casos de prueba de la clase</span>
  * <span style="color:#808000">@BeforeEach</span>  <span style="color:#000000">: Se ejecutará antes de cada</span>  <span style="color:#808000"> @Test</span>
  * <span style="color:#808000">@AfterEach</span>  <span style="color:#000000">: Se ejecutará después de cada</span>  <span style="color:#808000"> @Test</span>
  * <span style="color:#808000">@AfterAll</span>  <span style="color:#000000">: Se ejecutará después de todos los casos de prueba de la clase</span>
  * <span style="color:#000000">y otras más</span>


# Ejemplo

<span style="color:#808000">@</span>  <span style="color:#808000">BeforeAll</span>

<span style="color:#000080"> __static__ </span>  <span style="color:#000080"> __ __ </span>  <span style="color:#000080"> __void__ </span>  <span style="color:#000080"> __ __ </span>  <span style="color:#000000">initAll</span>  <span style="color:#000000">\(\) \{</span>

<span style="color:#000000">   </span>  <span style="color:#000000">System\.</span>  <span style="color:#660e7a"> _out_ </span>  <span style="color:#000000">\.println</span>  <span style="color:#000000">\(</span>  <span style="color:#008000"> __"Empiezan los __ </span>  <span style="color:#008000"> __tests__ </span>  <span style="color:#008000"> __"__ </span>  <span style="color:#000000">\);</span>

<span style="color:#000000">\}</span>

<span style="color:#808000">@</span>  <span style="color:#808000">BeforeEach</span>

<span style="color:#000080"> __void__ </span>  <span style="color:#000080"> __ __ </span>  <span style="color:#000000">init</span>  <span style="color:#000000">\(\) \{</span>

<span style="color:#000000">   </span>  <span style="color:#000000">System\.</span>  <span style="color:#660e7a"> _out_ </span>  <span style="color:#000000">\.println</span>  <span style="color:#000000">\(</span>  <span style="color:#008000"> __"Empieza un test"__ </span>  <span style="color:#000000">\);</span>

<span style="color:#000000">\}</span>

<span style="color:#808000">@</span>  <span style="color:#808000">AfterEach</span>

<span style="color:#000080"> __void__ </span>  <span style="color:#000080"> __ __ </span>  <span style="color:#000000">tearDown</span>  <span style="color:#000000">\(\) \{</span>

<span style="color:#000000">   </span>  <span style="color:#000000">System\.</span>  <span style="color:#660e7a"> _out_ </span>  <span style="color:#000000">\.println</span>  <span style="color:#000000">\(</span>  <span style="color:#008000"> __"Termina un test"__ </span>  <span style="color:#000000">\);</span>

<span style="color:#000000">\}</span>

<span style="color:#808000">@</span>  <span style="color:#808000">AfterAll</span>

<span style="color:#000080"> __static__ </span>  <span style="color:#000080"> __ __ </span>  <span style="color:#000080"> __void__ </span>  <span style="color:#000080"> __ __ </span>  <span style="color:#000000">tearDownAll</span>  <span style="color:#000000">\(\) \{</span>

<span style="color:#000000">   </span>  <span style="color:#000000">System\.</span>  <span style="color:#660e7a"> _out_ </span>  <span style="color:#000000">\.println</span>  <span style="color:#000000">\(</span>  <span style="color:#008000"> __"Terminaron todos los __ </span>  <span style="color:#008000"> __tests__ </span>  <span style="color:#008000"> __"__ </span>  <span style="color:#000000">\);</span>

<span style="color:#000000">\}</span>

![](img/02-B%281%29_3.png)

__Agregar plug\-in y dependencias__

# TP 1 – Ejer 7

# Implementación de tests unitarios para la versión TimerFromScratch
usando Junit
Diseñar testeos!!!



* <dependency>
* <groupId>org\.junit\.jupiter</groupId>
* <artifactId>junit\-jupiter\-engine</artifactId>
* <version>5\.12\.0</version>
* <scope>test</scope>
* </dependency>
  * Y
* <<plugin>
* <groupId>org\.apache\.maven\.plugins</groupId>
* <artifactId>maven\-surefire\-plugin</artifactId>
* <version>3\.5\.2</version>
* </plugin>


![](img/02-B%281%29_4.png)

Sólo con método toString\(\) es complicado saber si la clase está generando bien los días\, horas\, minutos\, segundos a partir de los ms…

¿Cómo sabremos cuál es el tiempo transcurrido para poder chequear si lo calculado es lo esperado?

Una Clase es  __Testeable__  si fue diseñada para poder realizar correctamente tests sobre ella\.

Los métodos no deben tener efectos secundarios ni dependencias con componentes externos

__Agregar métodos getters para facilitar el testing\.__

# TP 1- Ejer 8

# Mejorar la implementación de TimerFromScratch

![](img/02-B%281%29_5.png)

¿Validaron que no se obtengan 61 minutos? Etc

¿Probaron si falla con new Timer\(\) y ejecutamos con stop\(\) anterior?

¿Qué es el coverage de un testeo de unidad?

https://www\.jetbrains\.com/help/idea/running\-test\-with\-coverage\.html

