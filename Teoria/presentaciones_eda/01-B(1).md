# Maven

Introducción

![](img/01-B%281%29_0.png)



* Es una utilidad para crear y administrar proyectos basados en Java
* Como objetivos se propone:
  * Proporcionar un sistema de construcción uniforme
  * Proporcionar información de calidad del proyecto
  * Proporcionar pautas para el desarrollo de mejores prácticas
  * Permitir la migración transparente a nuevas funcionalidades
* Permite declarar  __dependencias__  para utilizar librerías externas \(o nuestras\)
* _[https://maven\.apache\.org](https://maven.apache.org)_


# Cómo me ayuda Maven

Maven\, compilá el proyecto

Maven\, armá un \.jar con lo que ya compilé

Maven\, compilá y armá un \.jar

Maven\, corré los tests

Maven\, guardá el proyecto localmente así lo uso como  dependencia en otros proyectos

Más info:  _[https://maven\.apache\.org/guides/introduction/introduction\-to\-the\-lifecycle\.html](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)_

# Goals & Build Phases

Goals: tareas específicas dentro del build

mvn jar:jar → armar un \.jar desde el código ya compilado

mvn dependency:tree → muestra las dependencias

mvn exec: java → corre el proyecto

<span style="color:#990000"> __Identifica al plugin__ </span>

<span style="color:#990000"> __Identifica al goal__ </span>

Build Phases: etapas del armado del proyecto

mvn compile → compila el código

mvn test→ corre los tests

mvn package → arma el \.jar

mvn install → guarda el proyecto en el repo local

<span style="color:#990000"> __Las Build Phases ejecutan todo lo de las etapas anteriores\!__ </span>

# Estructura Proyecto

# pom.xml mínimo

<span style="color:#000000"> __<project__ </span>  <span style="color:#000000"> xmlns="http://maven\.apache\.org/POM/4\.0\.0" </span>

<span style="color:#000000">xmlns:xsi="http://www\.w3\.org/2001/XMLSchema\-instance" </span>

<span style="color:#000000">xsi:schemaLocation="http://maven\.apache\.org/POM/4\.0\.0 http://maven\.apache\.org/xsd/maven\-4\.0\.0\.xsd"</span>  <span style="color:#000000"> __>__ </span>

<span style="color:#000000">  </span>  <span style="color:#000000"> __\<modelVersion>__ </span>  <span style="color:#000000">4\.0\.0</span>  <span style="color:#000000"> __\</modelVersion>__ </span>

<span style="color:#0070c0">  \<groupId>ar\.edu\.itba\.eda\</groupId></span>

<span style="color:#0070c0">  \<artifactId>Timer\</artifactId></span>

<span style="color:#0070c0">  \<version>1\.0\</version></span>

<span style="color:#000000"> __\</project>__ </span>

# Versión de Java



* Si queremos estar seguros de que estamos compilando con Java 11  \(sobre todo cuando usamos generics donde queremos garantizar cierta versión \)\, agregamos:
* __Opción 1:__
* <project … >
* …
* <properties>
  * <maven\.compiler\.source> <span style="color:#00b050">11</span> </maven\.compiler\.source>
* <maven\.compiler\.target> <span style="color:#00b050">11</span> </maven\.compiler\.target>
* <span style="color:#00b050">         <</span>  <span style="color:#00b050">project\.build\.sourceEncoding</span>  <span style="color:#00b050">>UTF\-8</</span>  <span style="color:#00b050">project\.build\.sourceEncoding</span>  <span style="color:#00b050">> </span>
* </properties>
* …
* </project>




* __Opción 2:__
* \<project … >
* …
* \<build>
* \<plugins>
* \<plugin>
* \<groupId>org\.apache\.maven\.plugins\</groupId>
* \<artifactId>maven\-compiler\-plugin\</artifactId>
* \<version>3\.8\.0\</version>
* \<configuration>
  * \<release> <span style="color:#00b050"> __11__ </span> \</release>
  * \<encoding> <span style="color:#00b050"> __UTF\-8__ </span> \</encoding>
* \</configuration>
* \</plugin>
* \</plugins>
* \</build>
* …
* \</project>


# Dependencias

En el pom\.xml se declaran\, además\, las dependencias a utilizar\.

Algoritmo: Maven busca primero localmente a la dependencia en nuestro repositorio local\. En caso de no encontrarla la descarga del repositorio correspondiente al repositorio local de nuestra compu\.

Ese repositorio local típicamente se encuentra en $HOME/\.m2

Ejemplo:

C:\\Users\\lgomez\\\.m2

/Users/jabu/\.m2

/home/luis/\.m2

# Repositorios

![](img/01-B%281%29_1.png)

__Migrar la clase MyTimer anterior para que sea un proyecto Maven\. Será nuestra primera versión\.__

# TP 1-Ejer 3.1

# TP 1- Ejer 4.1 y 4.2

__Crear un nuevo proyecto Maven desde el IDE con dicha dependencia\.__

__La funcionalidad a implementar y caso de uso\, sigue siendo la misma\.__

__Tip: investigar las clases __  __Instant__  __ y __  __Period__

_[https://www\.joda\.org/joda\-time/](https://www.joda.org/joda-time/)_  _ _

__\(leer detenidamente su especificación\)__

__\(nuestra clase será__

__un wrapper\)__

# Implementar la clase MyTimer (versión 2, usando la biblioteca Joda y Maven)

El proyecto se llamará TimerJoda

![](img/01-B%281%29_2.png)



* La dependencia de joda\-time:
* \<project … >
* …
* \<dependencies>
  * \<\!\-\- https://mvnrepository\.com/artifact/joda\-time/joda\-time \-\->
  * __\<dependency>__
  * __    \<groupId>joda\-time\</groupId>__
  * __    \<artifactId>joda\-time\</artifactId>__
  * __    \<version>2\.10\.10\</version>__
  * __\</dependency>__
* \</dependencies>
* …
* \</project>
