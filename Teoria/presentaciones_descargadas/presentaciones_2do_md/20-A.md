# Estructura de Datos y Algoritmos

# ITBA     2025-Q2

# BST  y sus problemas

Este BST no es completo\, no est√° lleno

Este BST no es completo\, no est√° lleno

Este BST es completo\, no est√° lleno

Si en particular hablamos de los BST\, que un √°rbol sea completo implica que la ‚Äúforma del √°rbol es muy buena‚Äù\.

En un √°rbol as√≠: ¬øCu√°l es la complejidad temporal para b√∫squeda? ¬øPara inserci√≥n? ¬øPara borrado?

Recapitulando‚Ä¶

__El peor caso __  __es __  __cuando est√° totalmente desbalanceado__ \.

En ese caso se pierde toda la ventaja de b√∫squeda binaria\, necesaria inclusive para inserci√≥n/borrado/b√∫squeda en s√≠\.

Si los elementos llegan en forma ordenada\,  __se obtiene un √°rbol degenerado__ \. Se obtiene algo que tiene la desventaja de la lista lineal en cuanto a c√≥mo llegar a un elemento en particular\, pero ocupando mucho m√°s espacio\!



* Relaci√≥n con el Logaritmo:
  * En un √°rbol lleno\, cada nivel tiene el doble de nodos que el nivel anterior\, comenzando con 1 nodo en el nivel 0 \(la ra√≠z\)\.
  * El n√∫mero de nodos en un √°rbol binario lleno de altura ‚Ñé es:
    * 20 \+ 21 \+ 22 \+ \.\.\. \+ 2‚Ñé  = 2‚Ñé\+1 ‚àí1\.
  * _				              n _ = 2 _h_ \+1‚àí1
* Resolviendo para  _h_ :
* ùëõ\+1 = 2‚Ñé\+1
* log‚Å°2\(ùëõ\+1\) = ‚Ñé\+1
* ‚Ñé = log‚Å°2\(ùëõ\+1\)‚àí1
* En el  __mejor__  __ __  __caso__ \, la altura  _h_  de un BST es ùëÇ\(log‚Å°ùëõ\)\. _ _ Esto significa que la altura crece logar√≠tmicamente con respecto al n√∫mero de nodos\.


_Conclusi√≥n_  _: hay que tratar de que la altura del √°rbol sea la m√≠nima posible\. O\, por lo menos\, _  <span style="color:#00b050"> _tenerla controlada_ </span>  _\._

# Algunas propiedades‚Ä¶

Pero podr√≠amos no ser tan exigentes y tener una muy buena forma\.\.

__Definici√≥n__  __ AVL: ‚Äú__  __BST __  __balanceado__  __ __  __por__  __ __  __altura__  __‚Äù __

G\.M\.  __A__ delson\- __V__ elskii y E\.M\.  __L__ andis  propusieron en 1962 la primera versi√≥n de BST que se balancea din√°micamente\.

Un AVL es un BST donde en cada nodo la  _diferencia_  de alturas entre sus 2 sub√°rboles es a lo sumo 1\.

_Factor de balance_

# AVL

Ej: no es AVL\. ¬øCu√°les son los nodos con problemas?

Ej: no es AVL\. ¬øCu√°les son los nodos con problemas?

Ej: es AVL \(aunque no es completo\)

Ej: es AVL \(y completo\)

__Ejercicio  __ ¬øCu√°l es AVL? Justificar calculando el factor de balance en cada nodo

Caso A:

Rta: S√≠\. Todo nodo tiene fb = 0

Un √°rbol lleno es AVL

¬øCu√°l es AVL? Justificar calculando el factor de balance en cada nodo

Caso B:

¬øqu√© no satisface?

¬øCu√°l es AVL? Justificar calculando el factor de balance en cada nodo

Caso B:

¬øque no satisface?

Rta: No\. Del nodo 50 la h del sub√°rbol izq es 1 y la del sub√°rbol derecho es \-1 o sea fb = 2\. Es el √∫nico nodo que no satisface\.

¬øCu√°l es AVL? Justificar calculando el factor de balance en cada nodo

Caso C:

Rta: S√≠\. Nodos 20\, 50 y 70  tienen fb =  \-1 ‚Äì \(\-1\) o sea 0\.

Los nodos 30 y 80 tienen fb = 0 ‚Äì \(\-1\) o sea 1\.  El nodo 40 tiene fb = 1 ‚Äì 0 o sea 1\. El nodo 60 tiene fb = 2 ‚Äì 1 o sea 1



* __Operaci√≥n__  __ __  __Inserci√≥n__
* Se inserta en el BST
* Si est√°  __desbalanceado__  __ __ se aplican rotaciones para que siga siendo AVL => se rota el √°rbol con pivote m√°s joven desbalanceado \(m√°s cercano al nodo insertado\)\. M√°s precisamente\,
  * __Caso__  __ 1__ : si se inserta a la izquierda de un nodo con factor de balance 1\, ese nodo va a tener factor de balance 2 y deja de ser AVL\. Hay que rotar\.
  * __Caso__  __ 2__ : Si se inserta a la derecha de un nodo con factor de balance \-1\, ese nodo va a tener factor de balance \-2 y deja de  ser AVL\. Hay que rotar\.


__Operaci√≥n : Rotaci√≥n__

Trasforma un √°rbol binario en otro\, de tal manera que preserva el orden de sus elementos al navegarlo en inorder\. Existen rotaciones  __simples__  y  __dobles__ \.

__Caso__  __ A: __  __Insertar__  __ a __  __izquierda__  __ de un __  __nodo__  __ con fb 1\. Este __  __nodo__  __ __  __tendr√≠a__  __ fb 2 y __  __dejar√≠a__  __ de __  __ser__  __ AVL\. __  __Tiene__  __ dos __  __subcasos__  __\.__



* __Caso__  __ A  \(__  __insertar__  __ a __  __izq__  __ de un __  __nodo__  __ con fb 1\) __  __tiene__  __ dos __  __subcasos__  __\.__
  * __Caso__  __ A1\- __  __Rotaci√≥n__  __ simple a __  __derecha__  __ \(R\):__  cuando se inserta respecto del hijo izquierdo del nodo con factor de balance 1\, en el sub√°rbol izquierdo


Rotaci√≥n hacia la  __derecha__  con pivote en el nodo m√°s joven desbalanceado con 2\, o sea ‚ÄúC‚Äù

<span style="color:#ff0000"> _Este es el nodo que tenia _ </span>  <span style="color:#ff0000"> _fb_ </span>  <span style="color:#ff0000"> _=1_ </span>

<span style="color:#00b0f0"> __ROTACION__ </span>

<span style="color:#00b0f0"> __SIMPLE R__ </span>



* __Caso__  __ A  \(__  __insertar__  __ a __  __izq__  __ de un __  __nodo__  __ con fb 1\) __  __tiene__  __ dos __  __subcasos__  __\.__
  * __Caso__  __ A1\- __  __Rotaci√≥n__  __ simple a __  __derecha__  __ \(R\):__  cuando se inserta respecto del hijo izquierdo del nodo con factor de balance 1\, en el sub√°rbol izquierdo




* __Caso__  __ A  \(__  __insertar__  __ a __  __izq__  __ de un __  __nodo__  __ con fb 1\) __  __tiene__  __ dos __  __subcasos__  __\.__
  * __Caso__  __ A2\- __  __Rotaci√≥n__  __ __  __doble__  __ __  __izquierda__  __ a __  __derecha__  __ \(LR\):__  cuando se inserta respecto del hijo izquierdo del nodo con factor de balance 1\, en el sub√°rbol derecho


<span style="color:#00b050"> __Alguno de __ </span>

<span style="color:#00b050"> __estos__ </span>



* __Caso__  __ A  \(__  __insertar__  __ a __  __izq__  __ de un __  __nodo__  __ con fb 1\) __  __tiene__  __ dos __  __subcasos__  __\.__
  * __Caso__  __ __  <span style="color:#ff0000"> __A2__ </span>  __\- __  __Rotaci√≥n__  __ __  __doble__  __ __  __izquierda__  __ a __  __derecha__  __ \(LR\):__  cuando se inserta respecto del hijo izquierdo del nodo con factor de balance 1\, en el sub√°rbol derecho


Segunda rotaci√≥n hacia la  __derecha__  con pivote en el nodo m√°s joven inicialmente desbalanceado con 2\, o sea ‚ÄúC‚Äù

Primera rotaci√≥n hacia la  __izquierda__  con pivote en el hijo del nodo desbalanceado \(del lado de la inserci√≥n\)\, en nuestro caso ‚ÄúA‚Äù

<span style="color:#0070c0"> __Rotaci√≥n simple R con pivote en C__ </span>

<span style="color:#0070c0"> __Rotaci√≥n simple L con pivote en A__ </span>



* __Caso__  __ A  \(__  __insertar__  __ a __  __izq__  __ de un __  __nodo__  __ con fb 1\) __  __tiene__  __ dos __  __subcasos__  __\.__
  * __Caso__  __ __  <span style="color:#ff0000"> __A2__ </span>  __\- __  __Rotaci√≥n__  __ __  __doble__  __ __  __izquierda__  __ a __  __derecha__  __ \(LR\):__  cuando se inserta respecto del hijo izquierdo del nodo con factor de balance 1\, en el sub√°rbol derecho


Segunda rotaci√≥n hacia la  __derecha__  con pivote en el nodo m√°s joven inicialmente desbalanceado con 2\, o sea ‚ÄúC‚Äù

Primera rotaci√≥n hacia la  __izquierda__  con pivote en el hijo del nodo desbalanceado \(del lado de la inserci√≥n\)\, en nuestro caso ‚ÄúA‚Äù

<span style="color:#0070c0"> __Rotaci√≥n simple R con pivote en C__ </span>

<span style="color:#0070c0"> __Rotaci√≥n simple L con pivote en A__ </span>

__Caso__  __ B: __  __insertar__  __ a __  __derecha__  __ de un __  __nodo__  __ con fb \-1\. Este __  __nodo__  __ __  __tendr√≠a__  __ fb \-2 y __  __dejar√≠a__  __ de __  __ser__  __ AVL\. __  __Tiene__  __ dos __  __subcasos__  __\.__



* __Caso__  __ __ B __  \(__  __insertar__  __ a __  __derecha__  __ de un __  __nodo__  __ con fb \-1\) __  __tiene__  __ dos __  __subcasos__  __\.__
  * __Caso__  __ B1\- __  __Rotaci√≥n__  __ simple a __  __izquierda__  __ \(L\):__  cuando se inserta respecto del hijo derecho del nodo con factor de balance \-1\, en el sub√°rbol derecho
  * __Caso__  __ B2\- __  __Rotaci√≥n__  __ __  __doble__  __ __  __derecha__  __ a __  __izquierda__  __ \(RL\):__  cuando se inserta respecto del hijo derecho del nodo con factor de balance \-1\, en el sub√°rbol izquierdo


An√°logas soluciones => caso espejado‚Ä¶



* __Caso__  __ __ B __  \(__  __insertar__  __ a __  __derecha__  __ de un __  __nodo__  __ con fb \-1\) __  __tiene__  __ dos __  __subcasos__  __\.__
  * __Caso__  __ B1\- __  __Rotaci√≥n__  __ simple a __  __izquierda__  __ \(L\):__  cuando se inserta respecto del hijo derecho del nodo con factor de balance \-1\, en el sub√°rbol derecho


Rotaci√≥n hacia la  __izquierda__  con pivote en el nodo m√°s joven desbalanceado con \-2\, o sea ‚ÄúC‚Äù

<span style="color:#ff0000"> _Este es el nodo que tenia _ </span>  <span style="color:#ff0000"> _fb_ </span>  <span style="color:#ff0000"> _= \-1_ </span>

<span style="color:#00b0f0"> __ROTACION__ </span>

<span style="color:#00b0f0"> __SIMPLE L__ </span>



* __Caso__  __ __ B __  \(__  __insertar__  __ a __  __derecha__  __ de un __  __nodo__  __ con fb \-1\) __  __tiene__  __ dos __  __subcasos__  __\.__
  * __Caso__  __ __  <span style="color:#ff0000"> __B2__ </span>  __\- __  __Rotaci√≥n__  __ __  __doble__  __ __  __derecha__  __ a __  __izquierda__  __ \(RL\):__  cuando se inserta respecto del hijo derecho del nodo con factor de balance \-1\, en el sub√°rbol izquierdo


Primera rotaci√≥n hacia la  __d__  __erecha__  con pivote en el hijo del nodo desbalanceado \(del lado de la inserci√≥n\)\, en nuestro caso ‚ÄúA‚Äù

Segunda rotaci√≥n hacia la  __izquierda__  con pivote en el nodo m√°s joven inicialmente desbalanceado con \-2\, o sea ‚ÄúC‚Äù

<span style="color:#ff0000"> _Este es el nodo que tenia _ </span>  <span style="color:#ff0000"> _fb_ </span>  <span style="color:#ff0000"> _= \-1_ </span>

<span style="color:#0070c0"> __Rotaci√≥n simple L con pivote en C__ </span>

<span style="color:#0070c0"> __Rotaci√≥n simple R con pivote en A__ </span>

